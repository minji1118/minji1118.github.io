<!DOCTYPE html>
<html lang="ko">
	<head>
		<title> HTML 테스트 </title>
	</head>
	<body>
		<figure>
			<img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyNTA3MDNfMTk1%2FMDAxNzUxNTAyNDc0NjQw.gbsC8y6L8wDaSSuUmm3RLouPdpeX0wudat2lzHGK_mgg._awhHPtxSRF4cVZAJXu4kMCaLGk_IbXei8oBBk_4L5cg.JPEG%2F20250405%25A3%25DF132043.jpg&type=sc960_832" alt="마이멜로디">
			<figcaption><h1>🌸귀여운 벚꽃 마이멜로디의 모습🌸</h1></figcaption>
			<img src="image.png" alt="피그마 디자인">
		</figure>

	 <h1>Netlify + API 연동</h1>

  <button onclick="callAPI()">API 호출하기</button>
  <p id="result">결과가 여기에 표시됩니다.</p>

			 <h1>주문</h1>
    <input id="book_title" placeholder="책 제목">
    <input id="amount" type="number" placeholder="수량">
    <button onclick="order()">주문</button>

    <h1>북뷰어</h1>
    <input id="filename" placeholder="파일명 (book1.pdf)">
    <button onclick="viewBook()">보기</button>
    <iframe id="viewer" width="600" height="400"></iframe>

	
  <script>
    async function callAPI() {
      const res = await fetch('/api/hello');
      const data = await res.json();
      document.getElementById('result').innerText = data.message;
    }
  </script>

		 <script>
        const user_id = 1; // 로그인 후 실제 user_id로 대체

        function order() {
            const book_title = document.getElementById("book_title").value;
            const amount = document.getElementById("amount").value;

            fetch("/order", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({user_id, book_title, amount})
            })
            .then(res => res.json())
            .then(data => alert(data.message));
        }

        function viewBook() {
            const book_title = document.getElementById("book_title").value;
            const filename = document.getElementById("filename").value;
            const url = `/view/${user_id}/${book_title}/${filename}`;
            document.getElementById("viewer").src = url;  // iframe으로 PDF/이미지 표시
        }
    </script>

	</body>
</html>
